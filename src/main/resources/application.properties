spring.application.name=rh-management-backend
server.port=9995

#configure the postgreSQL data the url is
# jdbc:mysql://localhost:3306/event_agency_db
#in the case of MySQL database
spring.datasource.url=jdbc:postgresql://localhost:5432/hr_managee_db
spring.datasource.username=ing_se

spring.datasource.password=xpwY6NsI-650jOoWQeQ8WxgRZUJVXRX59ogRkTDWaC0


# Explicitly sets the PostgreSQL driver to ensure correct metadata detection
spring.datasource.driver-class-name=org.postgresql.Driver


# Max Lifetime (30 minutes):
# The maximum absolute lifetime of a connection in the pool. Connections are
# retired after this period to prevent issues with infrastructure-level timeouts
# (e.g., firewalls, load balancers) that might silently drop long-lived connections.
spring.datasource.hikari.max-lifetime=1800000


#Hibernate is the ORM used by spring boot
## Hibernate Properties
# Disable feature detection by this undocumented parameter.
#This setting is used to control whether you should consult the JDBC metadata
#to determine certain Settings default values when the database may not be available
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults = false
# Because detection is disabled you have to set correct dialect by hand.
#Dialect means "the variant of a language"
#Hibernate is database agnostic. It can work with different databases.
#at some point hibernate has to use database specific SQL
#Hibernate uses "dialect" configuration to know which database you are using
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# Hibernate ddl (Data Definition Language) auto (create, create-drop, validate, update)
#the option "create-drop" will drop the database and create it again each time the application is started
#the option "update" will update  the schema each time the application is started
#the option "create" will create tables on the database each time the application is started.
#Only the new tables will be created
#the validate option is used the application is in production
spring.jpa.hibernate.ddl-auto = update

#to visualize the sql request generated by the ORM
# and sent to the server (choose the "true" option)
spring.jpa.show-sql=true

# Fix for "Database JDBC URL [undefined/unknown]"
# Sometimes Hibernate needs this to be explicitly allowed to access metadata early
spring.jpa.properties.hibernate.boot.allow_jdbc_metadata_access=true

## Hibernate Logging
logging.level.org.hibernate.SQL=DEBUG
logging.file.name=application.logs

# JWT Configuration
jwt.secret=d+rHmo0U4Rp1adRVyUtFHKEKMDuPpZJok/WUHSFbww+Ot3ladE1qnAf7XpL+pRFoQoKTzAmVPe2HMdIeYEs=
jwt.expiration=86400000
jwt.refresh.expiration=604800000

# Security Logging
logging.level.org.springframework.security=DEBUG
logging.level.tn.sesame.rh_management_backend=DEBUG

# Actuator
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# Frontend Configuration
# URL where the frontend application is hosted
# This is used for OAuth2 redirects after successful authentication
frontend.url=http://localhost:3000
frontend.oauth2.callback.path=/oauth2/callback
frontend.oauth2.error.path=/oauth2/error

# ============================================================================
# OAuth2.1 Configuration
# ============================================================================
# OAuth2.1 is the latest version of OAuth2 that simplifies and improves security
# It removes some deprecated features and adds better security practices

# OAuth2.1 Resource Server Configuration
# This allows your application to validate OAuth2 JWT tokens
# The issuer-uri is where your OAuth2 authorization server is located
# For now, we'll use our own JWT tokens, but this can be configured for external providers
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:9995
# The audience claim that must be present in the JWT token
spring.security.oauth2.resourceserver.jwt.audiences=rh-management-api

# OAuth2.1 Client Configuration (for external OAuth2 providers like Google, GitHub)
# These are the OAuth2 providers users can use to login

# Google OAuth2 Configuration
# To get these credentials:
# 1. Go to https://console.cloud.google.com/
# 2. Create a new project or select existing one
# 3. Enable Google+ API
# 4. Go to Credentials -> Create Credentials -> OAuth 2.0 Client ID
# 5. Set authorized redirect URI: http://localhost:9995/login/oauth2/code/google
spring.security.oauth2.client.registration.google.client-id=YOUR_GOOGLE_CLIENT_ID
spring.security.oauth2.client.registration.google.client-secret=YOUR_GOOGLE_CLIENT_SECRET
spring.security.oauth2.client.registration.google.scope=openid,profile,email
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

# GitHub OAuth2 Configuration
# To get these credentials:
# 1. Go to https://github.com/settings/developers
# 2. Click "New OAuth App"
# 3. Set Authorization callback URL: http://localhost:9995/login/oauth2/code/github
spring.security.oauth2.client.registration.github.client-id=YOUR_GITHUB_CLIENT_ID
spring.security.oauth2.client.registration.github.client-secret=YOUR_GITHUB_CLIENT_SECRET
spring.security.oauth2.client.registration.github.scope=read:user,user:email
spring.security.oauth2.client.registration.github.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

# OAuth2 Provider Configuration
# This tells Spring Security where to find the authorization server endpoints
spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/v2/auth
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v2/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=email

spring.security.oauth2.client.provider.github.authorization-uri=https://github.com/login/oauth/authorize
spring.security.oauth2.client.provider.github.token-uri=https://github.com/login/oauth/access_token
spring.security.oauth2.client.provider.github.user-info-uri=https://api.github.com/user
spring.security.oauth2.client.provider.github.user-name-attribute=login

